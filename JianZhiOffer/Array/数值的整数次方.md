# 题目

给定一个 double 类型的浮点数 base 和 int 类型的整数 exp。求 base 的 exp 次方。

# 思路

首先我们需要处理一些无效的输入，例如0 ^ -1。之后我们需要判断 exp 是否为负数，如果 exp 为负数，在我们求出 res 之后还要求其倒数。在 exp 不为负数的前提下我们调用 helper() 来求 base 的 exp 次方。虽然我们可以采用连乘的方法去求，但那不是最优的。这里我们采用递归的方法去求。例如2 ^ 4可以看成是(2 ^ 2) * (2 ^ 2)，而2 ^ 2可以看成是(2 ^ 1) * (2 ^ 1)，以此类推，注意当 exp 为奇数时，例如当 exp = 5 时，5 / 2只能得到2，所以此时我们还要再乘一个 base。

```java
public double Power(double base, int exp) {
//    if (isEqual(base, 0.0) && exponent < 0) throw new Exception("Invalid input!");
    boolean isNegative = false;
    if (exp < 0) {
        exp = -exp;
        isNegative = true;
    }
    double res = helper(base, exp);
    return isNegative ? 1 / res : res;
}

private boolean isEqual(double x, double y) {
    return Math.abs(x - y) <= 0.0000001;
}

private double helper(double base, int exp) {
    // special
    if (exp == 0) return 1;
    if (exp == 1) return base;
    double res = helper(base, exp / 2);
    res *= res;
    if ((exp & 1) == 1) res *= base;	// 这里用exp & 1代替exp % 2提高运算效率
    return res;
}
```

