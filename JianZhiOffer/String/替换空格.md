# 题目

请实现一个函数，将一个字符串中的每个空格替换成 “%20”。例如，当字符串为 "We Are Happy"，则经过替换之后的字符串为 "We%20Are%20Happy"。

# 思路1

直接使用 Java 的库函数 replaceAll()。

```java
public String replaceSpace(StringBuilder str) {
    return str.toString().replaceAll(" ", "%20");
}
```

# 思路2

容易想到的做法是每遇到一个空格，将其替换为 "%20"，由于是把1个字符替换为2个字符，所以其后所有的字符都需要向后移动2位，效率不高。可以先求出原字符串中空格的总数，据此计算出替换后的字符串的新的长度，利用两个指针 p1 和 p2，p1 指示旧的字符串的末尾，p2 指示新的字符串的末尾，从后向前进行替换。

```java
public String replaceSpace(StringBuilder str) {
    if (str == null || str.length() == 0) return "";
    int totalBlanks = 0;
    for (int i = 0; i < str.length(); i++) {
        if (str.charAt(i) == ' ') {
            totalBlanks++;
        }
    }
    int oldLength = str.length();
    int newLength = str.length() + totalBlanks * 2;
    str.setLength(newLength);
    int p1 = oldLength - 1;	// p1指向旧的字符串的末尾
    int p2 = newLenght - 1;	// p2指向新的字符串的末尾
    while (p1 >= 0 && p1 < p2) {
        char c = str.charAt(p1);
        if (c == ' ') {
            str.setCharAt(p2--, '0');
            str.setCharAt(p2--, '2');
            str.setCharAt(p2--, '%');
        } else {
            str.setCharAt(p2--, c);
        }
        p1--;
    }
    return str.toString();
}
```

